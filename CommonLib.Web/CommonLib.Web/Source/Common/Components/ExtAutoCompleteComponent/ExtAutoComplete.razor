@using CommonLib.Source.Common.Converters
@using CommonLib.Source.Common.Utils.UtilClasses

@namespace CommonLib.Web.Source.Common.Components.ExtAutoCompleteComponent
@typeparam TProperty
@inherits ExtAutoCompleteBase<TProperty>

<CascadingValue Value="_bpParentToCascade" Name="ParentParameter">

    <TelerikAutoComplete @ref="Tac"
        Class="@_renderClasses"
        Data="@Data.V"
        Filterable="@Filterable.V.ToBool()"
        Value="@_valueFieldValue"
        ValueField="@ValueField.V"
        ValueChanged="@(async value => await AutoComplete_ValueChanged(value))"
        Enabled="@InteractionState.V.IsEnabledOrForceEnabled"
        Placeholder="@Placeholder.V">
        <ItemTemplate>
            @if (Mode.V == AutoCompleteMode.Asset)
            {
                <div style="border-radius: 50%; flex: 0 0 24px; background-image: linear-gradient(160deg, black, #006000)">
                    <MyImage Path="@(((NameWithImage)(object)context).Image)" style="width: 24px; height: 24px; border-radius: 50%"></MyImage>
                </div>
                <div>@(((NameWithImage)(object)context).Name)</div>
            }
            else
            {
                @ItemTemplate
            }
        </ItemTemplate>
    </TelerikAutoComplete>

</CascadingValue>