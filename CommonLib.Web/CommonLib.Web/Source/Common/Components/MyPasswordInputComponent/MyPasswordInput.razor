@using CommonLib.Web.Source.Common.Utils.UtilClasses
@using CommonLib.Web.Source.Models
@using CommonLib.Web.Source.Common.Components.MyInputComponent
@using System.Threading
@using CommonLib.Source.Common.Utils.UtilClasses
@using SixLabors.ImageSharp

@namespace CommonLib.Web.Source.Common.Components.MyPasswordInputComponent
@inherits MyPasswordInputBase

<CascadingValue Value="_bpParentToCascade" Name="ParentParameter">

    <CascadingValue Value="InteractionState">
    <CascadingValue Value="_bpPasswordInput">
        @if (ChildContent == null)
        {
            <MyInputGroup>
                <input @ref="@_jsPasswordInput" type="text"
                       placeholder="@Placeholder"
                       passwordValue="@Text"
                       class="@_renderClasses"
                       style="@_renderStyle"
                       @attributes="@_renderAttributes"
                       my-guid="@_guid" />

                <MyInputGroupPrepend>
                    <MyIcon IconType="IconType.From(LightIconType.Key)"></MyIcon>
                </MyInputGroupPrepend>
                <MyInputGroupAppend>
                    <MyButton PreventMultiClicks="false" class="my-btn-toggle-password-visibility" style="width: 38px">
                        <MyIcon Color="Color.White" IconType="IconType.From(LightIconType.Eye)" class="my-icon-password-shown my-d-none"></MyIcon>
                        <MyIcon Color="Color.White" IconType="IconType.From(LightIconType.EyeSlash)" class="my-icon-password-hidden"></MyIcon>
                    </MyButton>
                </MyInputGroupAppend>
            </MyInputGroup>
        }
        else
        {
            <MyInputGroup>
                <input @ref="@_jsPasswordInput"
                       type="text"
                       placeholder="@Placeholder"
                       class="@_renderClasses"
                       style="@_renderStyle"
                       @attributes="@_renderAttributes"
                       my-guid="@_guid" />
                @ChildContent
            </MyInputGroup>
        }
    </CascadingValue>
    </CascadingValue>

</CascadingValue>